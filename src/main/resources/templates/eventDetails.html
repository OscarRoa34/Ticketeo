<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticketeo | Detalles del Evento</title>
    <link rel="stylesheet" th:href="@{/css/event-details.css}">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<div th:replace="~{fragments/navbar :: navbar-user}"></div>

<main class="container event-details-container">
    <article class="event-details-card">

        <header class="event-header">
            <span class="category-badge primary-badge" th:text="${event.category.name}">Categor√≠a</span>
            <h1 class="event-title" th:text="${event.name}">Nombre del Evento</h1>
        </header>

        <figure class="event-image-wrapper">
            <img th:src="${event.imageUrl}" th:alt="${event.name}" class="event-hero-image">
        </figure>

        <section class="event-info-wrapper">

            <div class="event-meta">
                <div class="meta-item">
                    <span class="meta-icon">üìÖ</span>
                    <div class="meta-text">
                        <span class="meta-label">Fecha</span>
                        <span class="meta-value" th:text="${event.date}">Fecha del evento</span>
                    </div>
                </div>
                <div class="meta-item">
                    <span class="meta-icon">üí∞</span>
                    <div class="meta-text">
                        <span class="meta-label">Entrada</span>
                        <span class="meta-value price-tag" th:data-price="${event.price}" th:text="${event.price == 0 ? 'Gratis' : '$' + event.price}">Valor</span>
                    </div>
                </div>
            </div>

            <div class="event-description-box">
                <h3>Acerca del evento</h3>
                <p th:text="${event.description}">Descripci√≥n detallada del evento.</p>
            </div>

            <div class="event-actions">
                <form th:action="@{/event/{id}/interest(id=${event.id})}" method="POST" style="width: 100%;">
                    <button type="submit" class="btn-primary btn-large btn-block">
                        ‚ù§Ô∏è ¬°Me interesa!
                    </button>
                </form>
                <a th:href="@{/user}" class="btn-secondary btn-large btn-block">Volver al cat√°logo</a>
            </div>
        </section>

    </article>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>

<script>
    function formatPrice() {
        const priceElements = document.querySelectorAll('.price-tag');
        priceElements.forEach(el => {
            const price = el.getAttribute('data-price');
            if (price && parseFloat(price) !== 0) {
                const formattedPrice = new Intl.NumberFormat('es-CO', {
                    style: 'currency',
                    currency: 'COP',
                    minimumFractionDigits: 0
                }).format(parseFloat(price));
                el.textContent = formattedPrice;
            }
        });
    }

    document.addEventListener('DOMContentLoaded', formatPrice);
</script>

</body>
</html>